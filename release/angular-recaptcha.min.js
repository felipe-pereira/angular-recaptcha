/**
 * angular-recaptcha build:2015-11-03
 * https://github.com/vividcortex/angular-recaptcha
 * Copyright (c) 2015 VividCortex
**/

(function(b){b.module("vcRecaptcha",[])})(angular);(function(b){b.module("vcRecaptcha").service("vcRecaptchaService",["$window","$q",function(e,h){function c(){if(!f)throw Error("reCaptcha has not been loaded yet.");}var k=h.defer(),a=k.promise,f;e.vcRecaptchaApiLoaded=function(){f=e.grecaptcha;k.resolve(f)};b.isDefined(e.grecaptcha)&&e.vcRecaptchaApiLoaded();return{create:function(g,d,e,b,c){c.callback=b;c.sitekey=d;c.stoken=e;d=f?h.when(f):a;return d.then(function(a){return a.render(g,c)})},reload:function(a){c();f.reset(a)},getResponse:function(a){c();return f.getResponse(a)}}}])})(angular);(function(b){function e(){throw Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create');}b.module("vcRecaptcha").directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(b,c,k){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=",theme:"=?",size:"=?",tabindex:"=?",useSecureToken:"=?",onCreate:"&",onSuccess:"&",onExpire:"&",getSecureToken:"&"},link:function(a,f,g,d){function n(){d&&d.$setValidity("recaptcha",null);l&&(c.cancel(l),l=null);angular.element(b[0].querySelectorAll(".pls-container")).parent().remove()}g.hasOwnProperty("key")||e();a.widgetId=null;var l,p=a.$watch("key",function(b){if(b){40!==b.length&&e();var h=function(b){c(function(){d&&d.$setValidity("recaptcha",!0);a.response=b;a.onSuccess({response:b,widgetId:a.widgetId})});l=c(function(){d&&d.$setValidity("recaptcha",!1);a.response="";a.onExpire({widgetId:a.widgetId})},12E4)},m=function(c){k.create(f[0],b,c,h,{theme:a.theme||g.theme||null,tabindex:a.tabindex||g.tabindex||null,size:a.size||g.size||null}).then(function(b){d&&d.$setValidity("recaptcha",!1);a.widgetId=b;a.onCreate({widgetId:b});a.$on("$destroy",n)});p()};if(a.useSecureToken){if("function"!==typeof a.getSecureToken)throw Error('You need to set "getSecureToken" function if "useSecureToken" is set to true');a.getSecureToken().then(function(a){m(a)})}else m()}})}}}])})(angular);
